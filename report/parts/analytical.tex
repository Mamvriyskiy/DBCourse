\chapter{Аналитическая часть}

\section{Существующие решения}

Так как IoT-вещей активно развиваются, то на рынке уже представлены различные платформы умных домов. 
Рассмотрим наиболее популярные из них:
\begin{itemize}
    \item Apple Homekit
    \item Intel IoT Platform
    \item MTS IoT HUB
    \item Xiaomi MI
\end{itemize}

Выделим следующие критерии для сравнения выбранных платформ:
\begin{enumerate}
    \item[1)] Многопользовательский доступ
    \item[2)] Возможность создания нескольких домов
    \item[3)] История работы устройств
\end{enumerate}

Сравнение выбранных платформ по указанным критериям представлены в таблице \ref{tab:solutions}:
\begin{table}[!ht]
    \centering
    \caption{\label{tab:solutions} Сравнение существующих решений}
    \begin{tabular}{|l|l|l|l|l|l|}
    \hline
        Решение & 1 & 2 & 3  \\ \hline
        Apple Homekit & + & + & - \\ \hline
        Intel IoT Platform & - & - & + \\ \hline
        MTS IoT HUB & - & + & + \\ \hline
        Предполагаемое решение & + & + & + \\ \hline
    \end{tabular}
\end{table}

Таким образом, ни одна из плафторм не удовлетворяет всем критериям. 

\section{Формулирвока требований к разрабатываемой базе данных и приложению}

В ходе выполнения курсовой работы необходимо разработать базу данных для хранения ифнормации 
о пользователях, умных домах, устройствах. 

Помимо этого, нужно спроектировать Web-приложение, 
которое будет предоставлять интерфейс для взаимодействия с базой данных с возможностью создавать умные дома, 
добавлять новые устройтва в свой дом, просматривать историю работы устройств.
    
Необходимо также предусмотреть многопользовательский доступ к дому, возможность добавления других пользователь 
в свой дом для совместного управления. Требуется реализовать функциональность для разных категорий пользователей, 
каждый из которых получает свой определенный набор прав.

\section{Формализация xданных}

Разрабатываемая база данных для IoT платформы умного дома должна содержать информаицю о пользователях, устройствах, умных домах,
истории работы устройств. Данные категории показаны на ER-диаграмме в нотации Чена \ref{img:er}.

\begin{figure}[h]
    \includegraphics[width=0.9\linewidth]{img/er.png}
    \caption{ER-диаграмма в нотации Чена}
    \label{img:er}
\end{figure}
\noindent
\clearpage

\section{Анализ существующих баз данных на основе формализации задачи}
База данных -- \textbf{самодокументированное} собрание \textbf{нтегрированных} записей. Рассмотрим части данное определения:
\begin{enumerate}
    \item База данных является самодокументированной, то есть содержит описание собственной струкутры, которое называется 
    словарем данных, каталогом данных или метаданными.
    \item База данных -- собрание интегрированных записей, она содержит:
    \begin{itemize}
        \item файлы данных,
        \item метаданные,
        \item индексы,
        \item может содеражтьетаданные приложений.
    \end{itemize}
    \item База данных является информационной моделью пользовательской модели предметной области.
\end{enumerate}

% Добавить автора Кренке, Теория и практика построения БД 2003

Модель базы данных определяет логическую структуру базы данных и то, каким образом данные будут храниться, организовываться
и обрабатываться.

Существует три основных типа моделей базы данных:
\begin{itemize}
    \item дореляционные;
    \item реляционные;
    \item постреляционные.
\end{itemize}

\subsection{Дореляционная база данных}

К дореляционным моделям баз данных относятся иерархическая и сетевая модели.

Иерархическая модель состоит из объектов с указателями от родительских объектов к потомкам, 
соединяя вместе связанную информацию. Она может быть представлена в виде дерева. Одним из больших минусов данной
модели является невозможность отношения "многие-ко-многим"

Основными понятиями сетевой модели базы данных являюся узел и связь. Узел -- совокупность атрибутов данных, описывающих
некоторый объект. Данная база данных может быть предствлена в виде графа. При изменении структуры данной модели придется 
изменять и приложние, так как логика процедуры выборки данных зависит от физической организации этих данных.

\subsection{Реляционная база данных}
В реляционных моделях данные организованы в набор двумерных взаимосвязанных таблиц. 
Каждая из которых представляет собой набор столбцов и строк, где столбец представляет атрибуты сущности, 
а строки представляют записи. Такое представление обеспечивает простой и эффективный способ хранения структурированной информации, 
доступа к ней, а также легкую сортировку.

Также в данной модели происходит разделение между физическим и логическим уровнями, что 
позволяет управлять физической системой хранения, не меняя данных, содержащихся в логической структуре.

% ToDo https://www.oracle.com/cis/database/what-is-a-relational-database/

\subsection{Постреляционные}

Нереляционная база данных —- это база данных, в которой в отличие от большинства традиционных систем баз данных 
не используется табличная схема строк и столбцов. В этих базах данных применяется модель хранения, оптимизированная 
под конкретные требования типа хранимых данных. Например, данные могут храниться как простые пары "ключ — значение", 
документы JSON или граф, состоящий из ребер и вершин. Все эти хранилища данных не используют реляционную модель. 

% ToDo https://learn.microsoft.com/ru-ru/azure/architecture/data-guide/big-data/non-relational-data

Недостатком такой модели является сложность решения проблемы обеспечения целостности и непротиворечивости хранимых данных.


\section{Формализация и описание пользователей проектируемого приложения к базе данных}
Для взаимодействия с Web-приложением было выделено четыре категории пользователя: новый пользователь,
владелец, участник дома, зарегистрированный пользователь.

Все возможные функции для каждой категории пользователей представлены на следующей Use-case диаграмме \ref{img:iot}
\begin{figure}[h]
    \includegraphics[width=0.9\linewidth]{img/iot.png}
    \caption{Use-case диаграмм полльзователей}
    \label{img:iot}
\end{figure}
\noindent

Новый пользователь -- незарегистрированный пользователь, который получает возможность зарегистрироваться 
на IoT платформе, введя логин и пароль. 

Зарегистрированный пользователь -- пользователь, который прошел регистрацию. Он может создать собственный дом или стать участником 
дома.

Участник дома - пользователь, который который вступил в дом. В зависимостьи от уровня доступа ему доступны следующие функции:
просмотр статистики, управление устройствами, также при необходимости он может создать собственный дом.

Владелец -- пользователь, который создал дом. Ему доступен наибольший функционал, помимо функций доступных участнику,
он может добавлять/удалять участников дома, устройства, определять уровень доступа других участников к дому. Также владелец 
может стать участником другого дома.

\section*{Вывод}

В данном разделе проведен анализ аналогов IoT-платформ для умного дома.
Ни одно из исследованных решений не соответствовало всем установленным критериям сравнения. 
При рассмотрении моделей баз данных было принято решение в пользу реляционной модели. 
Это обосновано необходимостью обеспечения целостности хранящихся данных в разрабатываемой базе данных 
для IoT-платформы, а также простотой хранения структурированной информации и возможностью ее сортировки.

Кроме того, были формализованы поставленная задача, данные и категории пользователей.
